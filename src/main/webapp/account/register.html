<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
  <meta name="description" content="SweatMate by Rannegger & Zenz">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="./../images/icon_sweatmate.svg">
  <link rel="stylesheet" href="./../styles/styles.css">
  <script src="../sample.js"></script>
</head>
<body>
<main>
  <!-- Navigation -->
  <nav class="navbar fixed-top">
    <div class="navbar-container">
      <div class="navbar-brand">
        <a href="./../index.html"><img src="./../images/logo_sweatmate.svg" alt="Logo"></a>
      </div>
      <ul class="navbar-links">
        <li><a href="./../index.html">Home</a></li>
        <li><a href="./../discover/discover.html">Discover</a></li>
        <li><a href="./../about.html">About</a></li>
        <li><a href="/"><img src="./../images/icon_login_active.svg" alt="Login"></a></li>
      </ul>
    </div>
  </nav>

  <div>
    <!-- Image on the right -->
    <img src="./../images/img_register.svg" alt="GYM" class="picture-right">
  </div>
  <div class="text-container">
    <h1>Create Account</h1>
    <h4>We are glad that you want to join us!</h4>
    <div>
      <form>
        <div class="group">
          <!-- Username input field -->
          <input type="text" id="newUserUsername" onblur="validateInput()" required>
          <p id="fehlermeldung" style="color: darkred"></p>
          <span class="highlight"></span>
          <span class="bar"></span>
          <label>Username</label>
        </div>

        <script>
          async function validateInput() {
            let url = 'http://localhost:8080/sweatMate_TestProject-1.0-SNAPSHOT/api/login';
            let response = await fetch(url);
            let vals = await response.json();
            var input = document.getElementById("newUserUsername").value;
            var fehlermeldung = document.getElementById("fehlermeldung");
            if (vals.includes(input)) {
              fehlermeldung.textContent = "Username already in use";
              document.getElementById("newUserUsername").value = ""; // Zur√ºcksetzen des Eingabefelds
            } else {
              fehlermeldung.textContent = "";
            }
          }
        </script>
        <div class="group">
          <!-- Firstname input field -->
          <input type="text" id="newUserFirstname" required>
          <span class="highlight"></span>
          <span class="bar"></span>
          <label>Firstname</label>
        </div>
        <div class="group">
          <!-- Lastname input field -->
          <input type="text" id="newUserLastname" required>
          <span class="highlight"></span>
          <span class="bar"></span>
          <label>Lastname</label>
        </div>
        <div class="group">
          <!-- Email input field -->
          <input type="text" id="newUserMail" required>
          <span class="highlight"></span>
          <span class="bar"></span>
          <label>Email</label>
        </div>
        <div class="group">
          <!-- Password input field -->
          <input type="password" id="newUserPwd" required>
          <span class="highlight"></span>
          <span class="bar"></span>
          <label>Password</label>
        </div>
        <div class="cb-flex-container">
          <div class="cbx">
            <!-- Checkbox -->
            <input id="cbx" type="checkbox">
            <label for="cbx"></label>
          </div>
          <div>
            <!-- Checkbox label -->
            <p class="cbLabel">I agree to the <span style="text-decoration: underline">Terms of Service</span> *</p>
          </div>
        </div>
      </form>
    </div>
    <div>
      <!-- "Create Account" button -->
      <a>
        <input class="button-primary" type="button" value="Create Account" onclick="insertNewUser(newUserUsername.value, newUserFirstname.value, newUserLastname.value, newUserMail.value, newUserPwd.value)">
      </a>
    </div>
    <div>
      <!-- "Already have an account?" button -->
      <a href="./login.html">
        <input class="button-tertiary" type="button" value="Already have an account?">
      </a>
    </div>
  </div>
</main>
</body>
</html>
